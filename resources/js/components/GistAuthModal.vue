<template>
    <div class="fixed inset-0 z-50 flex px-1 overflow-auto sm:px-0 bg-smoke">
        <div class="relative flex flex-col w-full max-w-md p-10 m-auto bg-white rounded-lg">
            <span
                @click="$emit('close-modal')"
                class="absolute top-0 bottom-0 right-0 p-2"
            >
                <svg class="w-5 h-5 fill-current text-grey hover:text-grey-darkest" role="button" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                    <title>Close</title>
                    <path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/>
                </svg>
            </span>

            <div class="flex justify-center my-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-12 h-12 text-blue-dark" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z" clip-rule="evenodd" />
                </svg>
            </div>

            <p class="flex justify-center">Sign in to star or leave a comment</p>

            <div class="flex justify-center flex-1 mt-4">
                <a class="flex items-center px-3 py-2 my-4 text-sm text-white rounded bg-grey-darkest" href="/auth/github">
                    <span class="w-6 mr-2 text-white fill-current">
                        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 1024 1024" enable-background="new 0 0 1024 1024" xml:space="preserve">
                        <path d="M512 0C229.25 0 0 229.25 0 512c0 226.25 146.688 418.125 350.156 485.812 25.594 4.688 34.938-11.125 34.938-24.625 0-12.188-0.469-52.562-0.719-95.312C242 908.812 211.906 817.5 211.906 817.5c-23.312-59.125-56.844-74.875-56.844-74.875-46.531-31.75 3.53-31.125 3.53-31.125 51.406 3.562 78.47 52.75 78.47 52.75 45.688 78.25 119.875 55.625 149 42.5 4.654-33 17.904-55.625 32.5-68.375C304.906 725.438 185.344 681.5 185.344 485.312c0-55.938 19.969-101.562 52.656-137.406-5.219-13-22.844-65.094 5.062-135.562 0 0 42.938-13.75 140.812 52.5 40.812-11.406 84.594-17.031 128.125-17.219 43.5 0.188 87.312 5.875 128.188 17.281 97.688-66.312 140.688-52.5 140.688-52.5 28 70.531 10.375 122.562 5.125 135.5 32.812 35.844 52.625 81.469 52.625 137.406 0 196.688-119.75 240-233.812 252.688 18.438 15.875 34.75 47 34.75 94.75 0 68.438-0.688 123.625-0.688 140.5 0 13.625 9.312 29.562 35.25 24.562C877.438 930 1024 738.125 1024 512 1024 229.25 794.75 0 512 0z" />
                        </svg>
                    </span>
                    Sign in with GitHub
                </a>
            </div>
        </div>
    </div>
</template>

<script>
    export default {
        created() {
            const onEscape = (e) => {
                if (e.keyCode === 27) {
                    this.$emit('close-modal')
                }
            }

            document.addEventListener('keydown', onEscape)

            this.$once('hook:destroyed', () => {
                document.removeEventListener('keydown', onEscape)
            })
        }
    }
</script>

<style scoped>
    .bg-smoke {
        background-color: rgba(0, 0, 0, 0.5);
    }
</style>
